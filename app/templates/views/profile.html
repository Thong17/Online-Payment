{% extends 'layout/layout.html' %}

{% block title %} - Profile {% endblock %}

{% block content %}
<div class="loading-page">
    <span></span>
    <span></span>
    <span></span>
</div>
<div class="container" style="margin-top: 120px;">
    <div class="row">
        <div class="col-md-2">
            <div class="profile">
                <div class="profile-img">
                    {% if user.profile %}
                    <img src="/static/uploads/{{ user.profile[0].photo }}" alt="{{ user.profile[0].photo }}">
                    {% else %}
                    <img src="/static/uploads/default.png" alt="No image found">
                    {% endif %}
                </div>
                <div class="profile-details">
                    <h3>{{ user.username }}</h3>
                    <p>{{ user.email }}</p>
                    {% if user.profile[0].bio != '' %}
                    <p style="margin-top: 20px;"><b>Bio:</b> {{ user.profile[0].bio }}</p>
                    {% endif %}
                </div>
            </div>
            <br>
            {% if current_user.id == user.id %}
            <a class="btn btn-block border" href="/profile/details/{{ user.id }}">Edit Profile</a>
            {% else %}
            <button type="button" class="btn btn-block border" data-toggle="modal" data-target="#chatModal">
                <i class="fa fa-comment" aria-hidden="true"></i>
                Chat
            </button>
            <!-- The Modal -->
            <div class="modal fade" id="chatModal">
                <div class="modal-dialog modal-md">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Message</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <!-- Modal body -->
                        <div class="modal-body">
                            <div class="scrollable">
                                <ul class="chat-box">
                                    <li>Hey!</li>
                                    <li>Hello!</li>
                                    <li>Hey!</li>
                                    <li>Hello!</li>
                                    <li>Hey!</li>
                                    <li>Hello!</li>
                                    <li>Hey!</li>
                                    <li>Hello!</li>
                                    <li>Hey!</li>
                                    <li>Hello!</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Modal footer -->
                        <div class="modal-footer">
                            <div class="form-group">
                                <input type="text" class="form-control" id="message" style="width: 200%;">
                            </div>
                            <button type="button" class="btn btn-secondary">Send</button>
                        </div>

                    </div>
                </div>
            </div>
            {% endif %}
        </div>
        <div class="col-md-10">
            <div class="profile-menu">
                <ul class="profile-menu-bar">
                    <li class="active">
                        <i class="fa fa-laptop" aria-hidden="true"></i>
                        <a href="#">Post</a>
                    </li>
                    <li>
                        <i class="fa fa-video-camera" aria-hidden="true"></i>
                        <a href="#">Video</a>
                    </li>
                    <li>
                        <a href="#">Action</a>
                    </li>
                    <li>
                        <i class="fa fa-sliders" aria-hidden="true"></i>
                        <a href="#">Insight</a>
                    </li>
                    <li>
                        <i class="fa fa-bar-chart" aria-hidden="true"></i>
                        <a href="#">Reports</a>
                    </li>
                    <li>
                        <i class="fa fa-cog" aria-hidden="true"></i>
                        <a href="#">Settings</a>
                    </li>
                </ul>
                <div class="profile-menu-action">

                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
    $(document).ready(function () {
        $.each($('.profile-menu-bar li'), function () {
            $(this).on('click', function () {
                $('.profile-menu-bar li').removeClass('active')
                $(this).addClass('active')
            })
        })
    })
</script>
{% endblock %}